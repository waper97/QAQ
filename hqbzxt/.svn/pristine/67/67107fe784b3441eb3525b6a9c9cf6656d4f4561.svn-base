<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yj.hqbz.mapper.schoolOperation.AttendanceDetailMapper" >
  <resultMap id="BaseResultMap" type="com.yj.hqbz.model.schoolOperation.AttendanceDetail" >
    <result column="ID" property="id" jdbcType="VARCHAR" />
    <result column="FK_INDEXID" property="indexid" jdbcType="VARCHAR" />
    <result column="FK_USERID" property="userid" jdbcType="VARCHAR" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="SEX" property="sex" jdbcType="DECIMAL" />
    <result column="BIRTHDAY" property="birthday" jdbcType="TIMESTAMP" />
    <result column="USER_CODE" property="userCode" jdbcType="VARCHAR" />
    <result column="RESULT" property="result" jdbcType="DECIMAL" />
    <result column="REASON" property="reason" jdbcType="VARCHAR" />
  </resultMap>
  
  <insert id="insert" parameterType="com.yj.hqbz.model.schoolOperation.AttendanceDetail" >
    insert into ATTENDANCE_DETAIL (ID, FK_INDEXID, FK_USERID, 
      RESULT, REASON)
    values (#{id,jdbcType=VARCHAR}, #{indexid,jdbcType=VARCHAR}, #{userid,jdbcType=VARCHAR}, 
      #{result,jdbcType=DECIMAL}, #{reason,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.yj.hqbz.model.schoolOperation.AttendanceDetail" >
  	 update ATTENDANCE_DETAIL 
  	 set RESULT=#{result,jdbcType=VARCHAR},
  	 REASON=#{reason,jdbcType=VARCHAR}
  	 where ID=#{id,jdbcType=VARCHAR}
  </update>
  <select id="getByIndexId" parameterType="java.lang.String" resultMap="BaseResultMap">
  	select t.ID, t.FK_USERID, 
      t.RESULT, t.REASON, p.NAME,p.SEX,p.USER_CODE,p.BIRTHDAY
    from ATTENDANCE_DETAIL t, PRACTICE_USER p where FK_INDEXID=#{indexid,jdbcType=VARCHAR}
    and t.FK_USERID=p.USERID ORDER BY p.USER_CODE asc
  </select>
  
  
</mapper>